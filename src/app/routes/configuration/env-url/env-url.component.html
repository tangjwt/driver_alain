<page-header [autoTitle]='false'></page-header>
<div class="mb-md">
  <input nz-input [(ngModel)]="filter" name="name" nzPlaceHolder="请输入" style="width: 150px;" class="mr-sm" />
  <button nz-button (click)="filterRecord()" [nzType]="'primary'">搜索</button>
  <button nz-button (click)="show()" [nzType]="'primary'">增加</button>
</div>
<st #st [data]="envUrlList" [page]="page" [bordered]="true" [columns]="columns"></st>
<nz-modal nzTitle="添加/修改服务地址" [nzOkDisabled]="!this.envUrlFG.valid" [(nzVisible)]="isVisible"
  [nzOkLoading]="isOkLoading" (nzOnOk)="handleOk(envUrlFG.value)" (nzOnCancel)="handleCancel()">
  <form nz-form [formGroup]="envUrlFG"  [nzAutoTips]="autoTips">
    <nz-form-item>
      <nz-form-label nzRequired [nzSpan]="7">项目</nz-form-label>
      <nz-form-control [nzSpan]="12" nzHasFeedback>
        <nz-select formControlName="projectId" name="projectId"   nzPlaceHolder="Choose" (ngModelChange)="update($event)">
          <nz-option *ngFor="let pro of projects" [nzValue]="pro.id" [nzLabel]="pro.name"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzRequired [nzSpan]="7">环境</nz-form-label>
      <nz-form-control [nzSpan]="12" nzHasFeedback>
        <nz-select formControlName="envId" name="envId"   nzPlaceHolder="Choose">
          <nz-option *ngFor="let pro of envs" [nzValue]="pro.id" [nzLabel]="pro.name"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzRequired [nzSpan]="7">服务</nz-form-label>
      <nz-form-control [nzSpan]="12" nzHasFeedback>
        <nz-select formControlName="serviceId" name="serviceId"   nzPlaceHolder="Choose">
          <nz-option *ngFor="let pro of servers" [nzValue]="pro.id" [nzLabel]="pro.name"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label nzRequired [nzSpan]="7">服务地址</nz-form-label>
      <nz-form-control [nzSpan]="12" nzHasFeedback>
        <input nz-input formControlName="serviceUrl" name="serviceUrl">
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="7">description</nz-form-label>
      <nz-form-control [nzSpan]="12" nzHasFeedback>
        <textarea nz-input formControlName="description" name="description"></textarea>
      </nz-form-control>
    </nz-form-item>
  </form>
</nz-modal>
